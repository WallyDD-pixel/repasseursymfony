<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head><script src="../assets/js/color-modes.js"></script>

    <meta charset="utf-8">
    <link rel="icon" href="/assets/imgg/LOGO-LeRepasseur-FondBlanc.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <link rel="icon" href="/assets/imgg/LOGO-LeRepasseur-FondBlanc.png">
    
    <meta name="generator" content="Hugo 0.122.0">
    <title>Le repasseur</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/pricing/">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    

<link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        width: 100%;
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .btn-bd-primary {
        --bd-violet-bg: #712cf9;
        --bd-violet-rgb: 112.520718, 44.062154, 249.437846;

        --bs-btn-font-weight: 600;
        --bs-btn-color: var(--bs-white);
        --bs-btn-bg: var(--bd-violet-bg);
        --bs-btn-border-color: var(--bd-violet-bg);
        --bs-btn-hover-color: var(--bs-white);
        --bs-btn-hover-bg: #6528e0;
        --bs-btn-hover-border-color: #6528e0;
        --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
        --bs-btn-active-color: var(--bs-btn-hover-color);
        --bs-btn-active-bg: #5a23c8;
        --bs-btn-active-border-color: #5a23c8;
      }

      .bd-mode-toggle {
        z-index: 1500;
      }

      .bd-mode-toggle .dropdown-menu .active .bi {
        display: block !important;
      }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="pricing.css" rel="stylesheet">
  </head>
  <body>
    

    
<svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check" viewBox="0 0 16 16">
    <title>Check</title>
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
  </symbol>
</svg>
<header data-bs-theme="dark" >
  
  <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="/"><img src="/assets/imgg/LOGO-LeRepasseur-Fond-Fonce.png" alt="Logo" width="60"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Le repasseur
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="/index.html">Comment ça marche ?</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/index.html">Pourquoi choisir le Repasseur</a>
              </li>
            </ul>
          </li>
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Tarifs
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="/index.html">Abonnements</a></li>
              <li><a class="dropdown-item" href="/index.html">Collecte sans abonnement</a></li>
              <li><a class="dropdown-item" href="/index.html">Comparer les offres</a></li>
              <li><a class="dropdown-item" href="/index.html">Kit du repasseur</a></li>
              
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/index.html">Télécharger l'application</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/contact.html">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/faq.html" style="border-radius: 10px; background-color: rgb(87, 87, 87);">FAQ</a>
          </li>
        </ul>
        <div class="d-flex">
          <a href="/sign-in/user.html" class="btn btn me-3" style="background-color: #CE2029;">Mon compte</a>
          <a href="#" class="btn btn me-3" style="background-color: #CE2029;" onclick="logout();">Se déconnecter</a>
        </div>
      </div>
    </div>
  </nav>
</header>
<a href="#" style="position:fixed;bottom:60px;right:20px;">
  <i class="fas fa-arrow-up fa-3x"></i>
</a>
<div class="container py-3">
  

  <br>
  

  <div class="pricing-header p-3 pb-md-4 mx-auto text-start" style="margin-top: 50px;">
    <div class="container py-3" style="">
      <div class="row">
        <div class="col-md-6">
          <h2 style="font-size: 19px"class="text-start">Bonjour <span id="user-name" style="color: #CE2029;font-family: lobster;"></span> <span id="user-surname" style="color: #CE2029;font-family: lobster;"></span></h2>
          <h2 style="font-size: 19px">Abonnement actuel: <span id="current-subscription" style="font-family: lobster; color: #CE2029; font-size: 27px;"></span></h2>
          <h2 style="display: none">Mon N° Client : <span id="user-id"></span></h2>
          <h2 style="font-size: 19px">Mon N° Client : <span id="client-id"></span></h2>
        </div>
        <div class="col-md-3 d-flex justify-content-end align-items-center flex-column">
          <img src="/assets/imgg/CamionCOllecte.png" alt="CamionCOllecte" width="80" height="80">
          <h2 style="font-size: 19px">Mes collectes : <span id="repassage-count" style="color: #CE2029; font-weight:bold"></span> crédits(s)</h2>
      </div>
      <div class="col-md-2 d-flex justify-content-end align-items-center flex-column">
        <img src="/assets/imgg/FerRepasser.png" alt="FerRepasser" width="80" height="80">
        <h2 style="font-size: 19px">Mon repassage : <span id="new-collect-count" style="color: #CE2029; font-weight: bold;"></span> kg</h2>
    </div>
      </div>
    </div>
    <a href="/reservation.html" style="display: none; width: 200px; height: 50px; margin: 0 auto; border-radius: 10px; background-color: #CE2029; color: white; text-align: center; line-height: 50px; text-decoration: none;">Réserver Repassage</a>    <br>
    <div style="height: 5px; background-color:#10294B; width:100%; margin: 0; padding: 0;"></div></div>
    <!-- Conteneur pour les boutons -->
    <!-- Conteneur pour les liens centrés -->
    <div class="links-container" style="text-align: center; font-size: 24px; margin-top: 20px;">
      <a href="/recharges.html" class="hover-link" style="color: #10294B; font-weight: bold; text-decoration: none;">Recharges</a>
      <span style="color: #000;">|</span>
      <a href="#reservationsTable" class="hover-link" style="color: #10294B; text-decoration: none;">Mes Commandes</a>
      <span style="color: #000;">|</span>
      <a href="#section-abonnement" class="hover-link" style="color: #10294B; text-decoration: none;">Changer d'Abonnement</a>
    </div>
<style>
  .card-container {
    display: flex;
    justify-content: space-between;
  }
  .hover-link {
  transition: transform 0.3s ease, color 0.3s ease;
}

.hover-link:hover {
  transform: scale(1.1);
  color: #CE2029;
}
</style>
<br>
<h2>Saisissez votre code partenaire</h2>
<br>
<div class="input-group mb-3">
  <input type="text" class="form-control" placeholder="Code Partenaire" aria-label="Code promo" aria-describedby="button-addon2">
  <button class="btn btn-outline-secondary" type="button" id="button-addon2">Valider</button>
</div>
<div id="promo-message"></div>
<h1 style="color: #10294B;">Besoin d'une recharge ?</h1>
<br>
<main2>
  <div class="row row-cols-1 row-cols-md-2 mb-3 text-center card-container">
    <div class="card-block">
      <div class="col-md-6">
        <!-- Première carte (Kit de répasseur) -->
        <div class="card mb-4 rounded-3 shadow-sm">
          <div class="card-header py-3">
            <h4 class="my-0 fw-normal"></h4>
          </div>
          <div class="card-body">
            <h1 class="text"></h1>
            <h1 class="card-title pricing-card-title"><small class="text-body-secondary fw-light"></small></h1>
            <ul class="list-unstyled mt-3 mb-4">
              <li></li>
              <li></li>
              <li></li>
              <li></li>
            </ul>
          </div>
          <div class="card-footer"> <!-- Ajouter un élément 'card-footer' -->
            <button type="button" class="w-100 btn btn-lg btn-outline-primary">S'abonne</button> <!-- Ajouter le bouton "S'abonne" -->
          </div>
        </div>
      </div>
    </div>
    <div class="card-block">
      <div class="col-md-6">
        <!-- Deuxième carte (Pack 2.5) -->
        <div class="card mb-4 rounded-3 shadow-sm">
          <div class="card-header py-3">
            <h4 class="my-0 fw-normal"></h4>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title"><small class="text-body-secondary fw-light"></small></h1>
            <ul class="list-unstyled mt-3 mb-4">
              <li></li>
              <li></li>
              <li></li>
              <li></li>
            </ul>
          </div>
          <div class="card-footer"> <!-- Ajouter un élément 'card-footer' -->
            <button type="button" class="w-100 btn btn-lg btn-primary">S'abonne</button> <!-- Ajouter le bouton "S'abonne" -->
          </div>
        </div>
      </div>
    </div>
  </div>
</main2>
<div style="height: 5px; background-color:#10294B; width:100%; margin: 0; padding: 0;"></div>
<BR></BR>
<h1>Mes commandes </h1>
<div class="table-responsive">
  <table id="reservationsTable" class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Date collecte</th>
        <th>Date retour</th>
        <th>Poids</th>
        <th>N°commande</th>
        <th>État</th>
      </tr>
    </thead>
    <tbody>
      <!-- Les réservations seront ajoutées ici -->
    </tbody>
  </table>
<h1>Mes transactions</h1>
<div class="table-responsive">
  <table id="transactionsTable" class="table table-striped table-hover">
      <thead>
          <tr>
              <th>Date de Transaction</th>
              <th>Type</th>
              <th>Titre</th>
              <th>Montant</th>
              <th>Kg</th>
              <th>Collectes</th>
          </tr>
      </thead>
      <tbody>
          <!-- Les lignes de transactions seront insérées ici -->
      </tbody>
  </table>
</div>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script> <!-- Ajout du SDK Firebase Auth -->
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-firestore.js"></script>
<script>
  // Configuration Firebase
  var firebaseConfig = {
    apiKey: "AIzaSyDS86aEvc071-c0HTS8sJi_xQ01boa1q60",
    authDomain: "repasseurflutter-7fc37.firebaseapp.com",
    projectId: "repasseurflutter-7fc37",
    storageBucket: "repasseurflutter-7fc37.appspot.com",
    messagingSenderId: "348979158571",
    appId: "1:348979158571:web:8c8214ab09b160b10c546e",
    measurementId: "G-CWPDXBH4LT"
  };

  // Initialiser Firebase
  firebase.initializeApp(firebaseConfig);
  console.log("Firebase initialisé avec succès");

  // Référence à la base de données Firestore
  var db = firebase.firestore();

  // Fonction pour afficher les transactions dans la table
  function displayTransactions(userId) {
    console.log("Affichage des transactions pour l'utilisateur :", userId);
    db.collection("transactions").where("userId", "==", userId).get().then((querySnapshot) => {
      if (querySnapshot.empty) {
        console.log("Aucune transaction trouvée pour cet utilisateur.");
      } else {
        querySnapshot.forEach((doc) => {
          const transaction = doc.data();
          console.log("Transaction trouvée :", transaction);
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${transaction.transactionDate.toDate().toLocaleString()}</td>
            <td>${transaction.type}</td>
            <td>${transaction.title}</td>
            <td>${transaction.montant}.00€</td>
            <td>${transaction.collectes} Kg</td>
            <td>${transaction.reservations}</td>
          `;
          document.querySelector('#transactionsTable tbody').appendChild(row);
        });
      }
    }).catch((error) => {
      console.error("Erreur lors de la récupération des transactions :", error);
    });
  }

  // Obtenir l'utilisateur connecté et afficher les transactions
  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      console.log("Utilisateur connecté :", user.uid);
      displayTransactions(user.uid);
    } else {
      console.log("Utilisateur non connecté");
    }
  });
</script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script> <!-- Ajout du SDK Firebase Auth -->
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-firestore.js"></script>
<script>
  // Assurez-vous que Firebase est correctement initialisé avant ce script
  var firebaseConfig = {
    apiKey: "AIzaSyDS86aEvc071-c0HTS8sJi_xQ01boa1q60",
    authDomain: "repasseurflutter-7fc37.firebaseapp.com",
    projectId: "repasseurflutter-7fc37",
    storageBucket: "repasseurflutter-7fc37.appspot.com",
    messagingSenderId: "348979158571",
    appId: "1:348979158571:web:8c8214ab09b160b10c546e",
    measurementId: "G-CWPDXBH4LT"
  };

  firebase.initializeApp(firebaseConfig);
    
console.log("Firebase initialisé avec succès");
// Référence à la base de données Firestore
var db = firebase.firestore();

// Vérifiez si un utilisateur est connecté et obtenez son ID
firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // Utilisateur est connecté, récupérez l'ID de l'utilisateur
    var userId = user.uid;

    // Référence à la collection "demande de reservation" filtrée par userID
    var reservationsRef = db.collection("demande de reservation").where("userid", "==", userId);

    // Sélectionnez le corps du tableau où insérer les données
    var tbody = document.querySelector("#reservationsTable tbody");

    // Récupérez les données de la collection filtrée
    reservationsRef.get().then((querySnapshot) => {
      querySnapshot.forEach((doc) => {
        // Pour chaque document dans la collection, créez une nouvelle ligne dans le tableau
        var row = tbody.insertRow(-1); // Insère une ligne à la fin du tableau

        // Créez et insérez les cellules pour chaque champ
        var cellDateCollecte = row.insertCell(0);
        var cellDateRetour = row.insertCell(1);
        var cellPoids = row.insertCell(2);
        var cellNumCommande = row.insertCell(3);
        var cellEtat = row.insertCell(4);

        // Définissez le texte de chaque cellule avec les données du document
        cellDateCollecte.textContent = doc.data()["dateHeureReservation"];
        cellDateRetour.textContent = doc.data()["dateHeureRetour"];
        cellPoids.textContent = doc.data().kg;
        cellNumCommande.textContent = doc.data().numeroCommande;
        cellEtat.textContent = doc.data().etat;
      });
    }).catch((error) => {
      console.log("Erreur lors de la récupération des documents: ", error);
    });
  } else {
    // Utilisateur non connecté ou déconnexion
    console.log("Utilisateur non connecté");
  }
});
</script>

</div>

<div style="height: 5px; background-color:#10294B; width:100%; margin: 0; padding: 0;"></div>
<section id="section-abonnement">
  <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
    <h1 class="display-4 fw-normal text-body-emphasis" style="color: #10294B;">Changer d'abonnement</h1>
    <p class="fs-5 text-body-secondary"></p>
  </div>
</section>

  <main>
    <div id="changer">
    <div class="row row-cols-1 row-cols-md-3 mb-3 text-center">
      <div class="col">
        <div class="card mb-4 rounded-3 shadow-sm">
          <div class="card-header py-3">
            <h4 class="my-0 fw-normal"></h4>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title"><small class="text-body-secondary fw-light"></small></h1>
            <ul class="list-unstyled mt-3 mb-4">
              <li></li>
              <li></li>
              <li></li>
              <li></li>
            </ul>
            <button type="button" class="w-100 btn btn-lg btn-outline-primary"></button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card mb-4 rounded-3 shadow-sm">
          <div class="card-header py-3">
            <h4 class="my-0 fw-normal"></h4>
          </div>
          <div class="card-body"> 
            <h1 class="card-title pricing-card-title"><small class="text-body-secondary fw-light"></small></h1>
            <ul class="list-unstyled mt-3 mb-4">
              <li></li>
              <li></li>
              <li></li>
              <li></li>
            </ul>
            <button type="button" class="w-100 btn btn-lg btn-primary"></button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card mb-4 rounded-3 shadow-sm border-primary">
          <div class="card-header py-3 text-bg-primary border-primary">
            <h4 class="my-0 fw-normal"></h4>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title"><small class="text-body-secondary fw-light"></small></h1>
            <ul class="list-unstyled mt-3 mb-4">
              <li class="description"></li>
              <li class="avantage"></li>
              <li></li>
              <li></li>
            </ul>
            <button type="button" class="w-100 btn btn-lg btn-primary"></button>
          </div>
        </div>
      </div>
    </div>
  </div>
 </main>
 <div style="height: 5px; background-color:#10294B; width:100%; margin: 0; padding: 0;"></div>
 <style>
  .small-text {
    font-size: 16px; /* Réduire la taille de la police */
}
 </style>
 <br>
 <div class="card-body">
  <!-- Lien qui ouvre le modal -->
  <h1 class="small-text"> 
    <a href="#myModal" data-toggle="modal" style="font-weight: bold; color: #10294B; text-decoration: none;">Modifier mon compte</a>
  </h1>

<!-- Modal -->
<!-- Modal -->
<div id="myModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modifier mon compte</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <style>
        .styled-input {
          width: 100%;
          padding: 10px;
          margin: 10px 0;
          box-sizing: border-box;
          border: 2px solid #ccc;
          border-radius: 4px;
          background-color: #f8f8f8;
          font-size: 16px;
      }
      </style>
      <div class="modal-body">
        <form id="userForm">
          <label for="nom">Nom :</label>
          <input class="styled-input" type="text" id="nom" name="nom" placeholder="Nom">
          <label for="prenom">Prenom :</label>
          <input class="styled-input" type="text" id="prenom" name="prenom" placeholder="Prénom">
          <label for="email">Email :</label>
          <input class="styled-input" type="email" id="email" name="email" placeholder="Email">
          <label for="adresse">Adresse :</label>
          <input class="styled-input" type="text" id="adresse" name="adresse" placeholder="Adresse">
          <label for="codePostal">Code Postal :</label>
          <input class="styled-input" type="text" id="codePostal" name="codePostal" placeholder="Code Postal">
          <label for="telephone">Téléphone :</label>
          <input class="styled-input" type="tel" id="telephone2" name="telephone" placeholder="Téléphone">
        </form>
    </div>
      <div class="modal-footer">
        <button type="button" id="saveButton" class="btn btn-primary">Sauvegarder les modifications</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal de succès de mise à jour -->
<div class="modal" tabindex="-1" role="dialog" id="updateSuccessModal" data-focus="false">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Mise à jour réussie</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Votre profil a été mis à jour avec succès.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
      </div>
    </div>
  </div>
</div>
<h1 class="small-text">
  <a href="#" id="deleteButton" data-toggle="modal" data-target="#deleteAccountModal" style="font-weight: bold; color: #10294B; text-decoration: none;">Supprimer mon compte</a>
</h1>
<div class="modal fade" id="deleteAccountModal" tabindex="-1" role="dialog" aria-labelledby="deleteAccountModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteAccountModalLabel">Suppression de compte</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fermer">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h1>text explication 

        </h1>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-danger">Supprimer</button>
      </div>
    </div>
  </div>
</div>
 


 
<h1 class="small-text">
  <a href="#" data-toggle="modal" data-target="#resiliationModal" id="resilier" style="font-weight: bold; color: #10294B; text-decoration: none;">Résilier mon abonnement</a>
</h1>

<h1 class="small-text">
  <a href="#" data-toggle="modal"  id="resilier2" style="font-weight: bold; color: #53c730; text-decoration: none;">Démande de resiliation en cours...</a>
</h1>
<script>
  document.addEventListener('DOMContentLoaded', function() {
  firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
      // L'utilisateur est connecté, obtenir l'userID
      var userId = user.uid;
      
      // Interroger la collection "resiliation" pour cet userID
      firebase.firestore().collection('resiliation').where("userId", "==", userId)
        .get()
        .then((querySnapshot) => {
          if (!querySnapshot.empty) {
            // Un document correspondant est trouvé, afficher le texte pour 'resilier2'
            document.getElementById('resilier2').style.display = 'block';
            // Cacher 'resilier' si 'resilier2' est affiché
            document.getElementById('resilier').style.display = 'none';
          } else {
            // Aucun document correspondant trouvé, cacher le texte pour 'resilier2'
            document.getElementById('resilier2').style.display = 'none';
            // Assurez-vous que 'resilier' est visible si 'resilier2' est caché
            document.getElementById('resilier').style.display = 'block';
          }
        })
        .catch((error) => {
          console.error("Erreur lors de la recherche de la demande de résiliation:", error);
        });
    } else {
      // L'utilisateur n'est pas connecté, cacher les textes
      document.getElementById('resilier').style.display = 'none';
      document.getElementById('resilier2').style.display = 'none';
    }
  });
});
</script>
<!-- Modal -->
<div class="modal fade" id="resiliationModal" tabindex="-1" role="dialog" aria-labelledby="resiliationModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="resiliationModalLabel">Démande de resiliation</h5>
              
              <button type="button" class="close" data-dismiss="modal" aria-label="Fermer">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <form>
                  <div class="form-group">
                      <label for="email">Email</label>
                      <input type="email" class="form-control" id="email2" placeholder="Entrez votre email">
                  </div>
                  <div class="form-group">
                      <label for="nom">Nom</label>
                      <input type="text" class="form-control" id="nom2" placeholder="Entrez votre nom">
                  </div>
                  <div class="form-group">
                      <label for="prenom">Prénom</label>
                      <input type="text" class="form-control" id="prenom2" placeholder="Entrez votre prénom">
                  </div>
                  <div class="form-group">
                      <label for="annulation">Raison de l'annulation</label>
                      <select class="form-control" id="annulation">
                          <option>Choisissez une raison</option>
                          <option>Raison 1</option>
                          <option>Raison 2</option>
                          <option>Raison 3</option>
                          <!-- Ajoutez autant de raisons que nécessaire -->
                      </select>
                  </div>
                  <div class="form-group">
                    <label for="message">Message</label>
                    <textarea class="form-control" id="message" rows="3" placeholder="Entrez votre message"></textarea>
                </div>
              </form>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
              <button type="button" class="btn btn-primary">Confirmer la résiliation</button>
          </div>
      </div>
  </div>
</div>
 </div>
 <div id="bottom"></div>
 <a href="#bottom" style="position:fixed;bottom:20px;right:20px;">
  <i class="fas fa-arrow-down fa-3x"></i>
</a>
 </div>
 
 <!-- FOOTER -->
 <div class="container">
  <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
  <p class="col-md-4 mb-0 text-body-secondary">&copy; 2024 le repasseur.fr</p>

  <a href="/" class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
      <img class="bi me-2" src="/assets/imgg/LOGO-LeRepasseur-FondBlanc.png" width="100" height="120" alt="Description de l'image">
  </a>

  <ul class="nav col-md-4 justify-content-end">
      <li class="nav-item"><a href="/index.html" class="nav-link px-2 text-body-secondary">Comment ça marche</a></li>
      <li class="nav-item"><a href="/index.html" class="nav-link px-2 text-body-secondary">Abonnements</a></li>
      <li class="nav-item"><a href="/faq.html" class="nav-link px-2 text-body-secondary">FAQ</a></li>
      <li class="nav-item"><a href="/contact.html" class="nav-link px-2 text-body-secondary">Contact</a></li>
      <li class="nav-item"><a href="/CGU.html" class="nav-link px-2 text-body-secondary">Conditions d'utilisateur</a></li>
      <li class="nav-item"><a href="/index.html" class="nav-link px-2 text-body-secondary">Kit du repasseur</a></li>
      <li class="nav-item"><a href="/CGV.html" class="nav-link px-2 text-body-secondary">Conditions de vente</a></li>
      <li class="nav-item"><a href="/preparation.html" class="nav-link px-2 text-body-secondary">Bien préparer sa collecte</a></li>
      <li class="nav-item"><a href="/index.html" class="nav-link px-2 text-body-secondary">Collecte sans abonnement</a></li>
      <li class="nav-item"><a href="/index.html" class="nav-link px-2 text-body-secondary">Pourquoi le repasseur</a></li>
      <li class="nav-item"><a href="/index.html" class="nav-link px-2 text-body-secondary">Les tarifs</a></li>
      
      
  </ul>
  </footer>
</div>
</div>
<style>
  .custom-font {
    font-family: 'lobster';
    color: #CE2029; /* Remplacez 'Arial' par la police de votre choix */
    font-size: 32px;
    
  }
  .custom-font::first-letter {
    text-transform: uppercase;
}
.card-block {
  margin-right: 10cm; /* Ajouter une marge à droite de 10cm */
}
.card-block:not(:last-child) {
  margin-right: 10cm; /* Ajouter une marge à droite de 10cm */
}
.card-footer {
  display: flex;
  justify-content: center;
  align-items: center;
}

.card-footer .btn {
  width: 100%;
}
.title-font {
  font-family: 'lobster';
    color: #CE2029; /* Remplacez 'Arial' par la police de votre choix */
    font-size: 32px;
}
.details-list {
    transition: opacity 0.5s ease-in-out; /* Ajouter une animation de fondu */
}

.arrow-icon {
    transition: transform 0.5s ease-in-out; /* Ajouter une animation de rotation */
}
.non-copiable {
  user-select: none;
  -webkit-user-select: none;
}
.petit-texte {
  font-size: 0.6em; /* Réduit la taille du texte */
}
</style>

<script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Utiliser un sélecteur plus spécifique pour cibler uniquement le bouton dans #resiliationModal
    document.querySelector('#resiliationModal .modal-footer .btn-primary').addEventListener('click', function() {
      // Récupérer les valeurs du formulaire
      var email = document.getElementById('email2').value;
      var nom = document.getElementById('nom2').value;
      var prenom = document.getElementById('prenom2').value;
      var raisonAnnulation = document.getElementById('annulation').value;
      var message = document.getElementById('message').value;
  
      // Vérifier si l'utilisateur est connecté
      var user = firebase.auth().currentUser;
      if (user) {
        // Créer un objet avec les données du formulaire
        var formData = {
          email: email,
          nom: nom,
          prenom: prenom,
          raisonAnnulation: raisonAnnulation,
          message: message,
          userId: user.uid, // Optionnel, pour lier la demande à l'utilisateur
          date: new Date() // Optionnel, pour enregistrer la date de la demande
        };
  
        // Envoyer les données à Firestore
        firebase.firestore().collection('resiliation').add(formData)
          .then(() => {
            console.log('Demande de résiliation envoyée avec succès');
            // Fermer le modal et/ou afficher un message de succès
            $('#resiliationModal').modal('hide');
            alert('Votre demande de résiliation a été envoyée avec succès.');
          })
          .catch((error) => {
            console.error('Erreur lors de l\'envoi de la demande de résiliation:', error);
            alert('Une erreur est survenue. Veuillez réessayer.');
          });
      } else {
        console.log('Aucun utilisateur connecté');
        alert('Vous devez être connecté pour effectuer cette action.');
      }
    });
  });
  </script>

<script>
  // Votre configuration Firebase
  var firebaseConfig = {
    apiKey: "AIzaSyDS86aEvc071-c0HTS8sJi_xQ01boa1q60",
    authDomain: "repasseurflutter-7fc37.firebaseapp.com",
    projectId: "repasseurflutter-7fc37",
    storageBucket: "repasseurflutter-7fc37.appspot.com",
    messagingSenderId: "348979158571",
    appId: "1:348979158571:web:8c8214ab09b160b10c546e",
    measurementId: "G-CWPDXBH4LT"
  };
  // Initialiser Firebase
  firebase.initializeApp(firebaseConfig);
  document.addEventListener('DOMContentLoaded', function() {
  firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
      
      // L'utilisateur est connecté, vous pouvez utiliser l'ID de l'utilisateur ici
      document.getElementById('saveButton').addEventListener('click', function() {
        // Liste des codes postaux valides
        var validPostalCodes = [
          "06200", "06000", "06300", "06100", // Nice
          "06160", "06600", // Antibes
          "06150", "06400", // Cannes
          "06520", "06130", // Grasse
          "06800", // Cagnes-sur-Mer
          "06110", // Le Cannet
          "06700", // Saint-Laurent-du-Var
          "06220", // Vallauris
          "06210", // Mandelieu-la-Napoule
          "06250", // Mougins
          "06270", // Villeneuve-Loubet
          "06560", // Valbonne
          "06370", // Mouans-Sartoux
          "06410", // Biot
          "06580", // Pégomas
          "06550", // La Roquette-sur-Siagne
          "06590"  // Et autres codes...
        ];

        // Récupérez les valeurs des champs de formulaire et préparez l'objet avec les champs à mettre à jour
        var fieldsToUpdate = {
          adresse: document.getElementById('adresse').value,
          codePostal: document.getElementById('codePostal').value,
          email: document.getElementById('email').value,
          nom: document.getElementById('nom').value,
          prenom: document.getElementById('prenom').value,
          telephone: document.getElementById('telephone2').value
        };

        // Vérifiez si le code postal est valide
        if (!validPostalCodes.includes(fieldsToUpdate.codePostal)) {
          showModal("Le code postal n'est pas valide. Veuillez entrer un code postal valide.");
          return; // Arrêtez l'exécution si le code postal n'est pas valide
        }

        // Utilisez l'ID de l'utilisateur connecté
        var userId = user.uid;

        // Vérifiez si des changements ont été effectués
        db.collection("users").doc(userId).get().then(doc => {
          var data = doc.data();
          var hasChanges = false;
          for (let key in fieldsToUpdate) {
            if (fieldsToUpdate[key] !== data[key]) {
              hasChanges = true;
              break;
            }
          }

          if (hasChanges) {
            // Mise à jour des données dans Firebase
            db.collection("users").doc(userId).update(fieldsToUpdate)
              .then(function() {
                console.log("Document mis à jour avec succès !");
                // Affichez ici votre modal de succès
                showModal("Changement effectué avec succès !");
              })
              .catch(function(error) {
                console.error("Erreur lors de la mise à jour du document : ", error);
                // Affichez ici votre modal d'erreur
                showModal("Erreur lors de la mise à jour.");
              });
          } else {
            // Affichez ici votre modal indiquant qu'aucun changement n'a été effectué
            showModal("Aucun changement effectué.");
          }
        });
      });

function showModal(message) {
  // Implémentez la logique d'affichage de votre modal ici
  // Par exemple, en utilisant alert pour simplifier
  alert(message);
}
    } else {
      // Pas d'utilisateur connecté
      console.log("Aucun utilisateur connecté.");
    }
  });
});
  // Récupérer la référence de la collection 'demande de reservation'
  firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
  var reservationsRef = firebase.firestore().collection('demande de reservation');
  var user = firebase.auth().currentUser;
  // Récupérer toutes les réservations
  reservationsRef.where('userId', '==', user.uid).get().then((querySnapshot) => {
  // Obtenir l'utilisateur actuellement connecté
  var user = firebase.auth().currentUser;

  // Obtenir la référence du document de l'utilisateur dans Firestore
  var userRef = firebase.firestore().collection('users').doc(user.uid);


  userRef.get().then(function(doc) {
  if (doc.exists) {
    var data = doc.data();
    document.getElementById('adresse').value = data.adresse;
    
    document.getElementById('codePostal').value = data.codePostal;
    document.getElementById('email').value = data.email;
    document.getElementById('email2').value = data.email;
    document.getElementById('nom').value = data.nom;
    document.getElementById('nom2').value = data.nom;
    document.getElementById('prenom').value = data.prenom;
    document.getElementById('prenom2').value = data.prenom;
    document.getElementById('telephone2').value = data.telephone; // Modification ici
    console.log('Telephone:', data.telephone); // Modification ici
    console.log("Document data:", data);
  } else {
    console.log("No such document!");
  }
}).catch(function(error) {
  console.log("Error getting document:", error);
});



});
} else {
    // Aucun utilisateur n'est connecté
    console.log('Aucun utilisateur connecté');
  }
});


// Récupérer la référence de la collection 'abonnements'
// Récupérer la référence de la collection 'abonnements'
var abonnementsRef = firebase.firestore().collection('abonnements');

// Récupérer tous les documents de la collection 'abonnements'
abonnementsRef.get().then((querySnapshot) => {
  // Supprimer le contenu existant de la balise <main>
  var main = document.querySelector('main');
  main.innerHTML = '';

  // Créer une nouvelle rangée pour les abonnements
  var row = document.createElement('div');
  row.className = 'row row-cols-3 row-cols-md-5 mb-5 text-center';
  main.appendChild(row);

  var abonnements = [];

  querySnapshot.forEach((doc) => {
    var abonnement = doc.data();
    abonnement.id = doc.id; // Ajouter l'ID du document aux données de l'abonnement
    abonnements.push(abonnement);
  });

  // Trier les abonnements par prix
  abonnements.sort((a, b) => (a.prix || 0) - (b.prix || 0));

  abonnements.forEach((abonnement) => {
    // Exclure les abonnements "Partenaire" et "Aucun"
    if (abonnement.nom === "Partenaire" || abonnement.nom === "aucun") {
        return; // Passe à l'itération suivante de la boucle
    }

    var col = document.createElement('div');
    col.className = 'col-12 col-sm-6 col-md-4 col-lg-3';

    // Créer une nouvelle carte pour l'abonnement
    var card = document.createElement('div');
    card.className = 'card mb-4 rounded-3 shadow-sm';

    // Ajouter le titre de l'abonnement à la carte
    var cardHeader = document.createElement('div');
    cardHeader.className = 'card-header py-3';
    var title = document.createElement('h4');
    title.className = 'my-0 fw-normal title-font'; // Ajout de la classe 'title-font'
    title.textContent = abonnement.nom; // Utiliser le titre de l'abonnement
    cardHeader.appendChild(title);
    card.appendChild(cardHeader);

    // Ajouter le prix de l'abonnement à la carte
    var cardBody = document.createElement('div');
    cardBody.className = 'card-body';
    var price = document.createElement('h1');
    price.className = 'card-title pricing-card-title';
    if (abonnement.prix) {
      price.innerHTML = `<span class="petit-texte">${abonnement.prix}€ / mois</span>`;
    } else {
      price.textContent = 'Non défini';
    }
    cardBody.appendChild(price);

    var descriptionList = document.createElement('ul');
    descriptionList.className = 'list-unstyled mt-3 mb-4';
    descriptionList.style.display = 'none'; // Cacher initialement la liste

    var descriptionItem = document.createElement('li');
    descriptionItem.className = 'description';
    descriptionItem.textContent = abonnement.description; // Utiliser la description de l'abonnement
    descriptionList.appendChild(descriptionItem);

    // Ajouter les avantages de l'abonnement à la carte
    var avantageItem = document.createElement('li');
    avantageItem.className = 'avantage';
    avantageItem.textContent = abonnement.avantage; // Utiliser les avantages de l'abonnement
    descriptionList.appendChild(avantageItem);

    cardBody.appendChild(descriptionList);

    // Créer un nouveau bouton pour afficher les détails
    var detailButton = document.createElement('button');
    detailButton.type = 'button';
    detailButton.className = 'btn btn-info';
    detailButton.style.backgroundColor = '#10294B'; // Changer la couleur du bouton en rouge
    detailButton.style.color = 'white'; // Changer la couleur du texte en blanc

    // Créer l'icône de flèche vers le bas
    var downArrowIcon = document.createElement('i');
    downArrowIcon.className = 'fas fa-arrow-down';
    downArrowIcon.style.color = 'white'; // Définir la couleur de l'icône en blanc
    // Ajouter l'icône au bouton
    detailButton.appendChild(downArrowIcon);
    detailButton.appendChild(document.createTextNode(' Détail'));

    // Ajouter un écouteur d'événements pour afficher les détails lorsque le bouton est cliqué
    detailButton.addEventListener('click', function() {
        // Afficher ou cacher les détails de l'abonnement
        if (descriptionList.style.display === 'none') {
            descriptionList.style.display = 'block'; // Afficher la liste
            descriptionList.style.opacity = '1'; // Faire apparaître la liste
            downArrowIcon.style.transform = 'rotate(180deg)'; // Faire tourner l'icône
        } else {
            descriptionList.style.display = 'none'; // Cacher la liste
            descriptionList.style.opacity = '0'; // Faire disparaître la liste
            downArrowIcon.style.transform = 'rotate(0deg)'; // Remettre l'icône à sa position initiale
        }
    });
    descriptionList.className = 'list-unstyled mt-3 mb-4 details-list'; // Ajout de la classe 'details-list'
    downArrowIcon.className = 'fas fa-arrow-down arrow-icon'; // Ajout de la classe 'arrow-icon'

    // Ajouter le bouton à la carte
    cardBody.appendChild(detailButton);

    var image = document.createElement('img');
    image.src = abonnement.image; // Utiliser l'URL de l'image de l'abonnement
    image.className = 'card-img-top'; // Ajouter une classe pour le style
    card.appendChild(image);
    card.appendChild(cardBody);

    // Créer un nouveau bouton pour ouvrir la modal
    var button = document.createElement('button');
    button.type = 'button';
    button.className = 'btn btn-primary btn-block'; // Ajouter la classe 'btn-block' pour faire occuper le bouton toute la largeur
    button.textContent = 'Acheter';
    button.style.backgroundColor = '#CE2029'; // Changer la couleur du bouton en rouge
    button.style.color = 'white'; // Changer la couleur du texte en blanc

    button.addEventListener('click', function() {
      var id = abonnement.id;
      var description = abonnement.description ? encodeURIComponent(abonnement.description) : '';
      var advantage = abonnement.advantage ? encodeURIComponent(abonnement.advantage) : '';
      var price = abonnement.prix ? encodeURIComponent(abonnement.prix) : '';
      var kg = abonnement.kg ? encodeURIComponent(abonnement.kg) : '';
      var collectes = abonnement.collectes ? encodeURIComponent(abonnement.collectes) : '';

      window.location.href = '../recap.html?id=' + id + '&description=' + description + '&advantage=' + advantage + '&price=' + price + '&kg=' + kg + '&collectes=' + collectes;
      console.log('Achat de l\'abonnement', {
          id: id,
          nom: nom,
          description: description,
          advantage: advantage,
          price: price,
          kg: kg,
          collectes: collectes
      });
});

    // Vérifier le rôle de l'utilisateur et changer le texte du bouton en conséquence
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            var userId = user.uid; // Récupérer l'ID de l'utilisateur
            var docRef = firebase.firestore().collection('users').doc(userId);
            docRef.get().then((doc) => {
                if (doc.exists) {
                    var role = doc.data().role;
                    if (role === 'Mino' || role === 'Duo' || role === 'Solo' || role === 'Super Héros' || role == 'Partenaire') {
                        button.textContent = 'Changer abonnement';
                        // Afficher l'ID de l'utilisateur dans l'élément HTML
                        document.getElementById('user-id').textContent = userId;
                        // Masquer l'abonnement actif
                        if (abonnement.nom === role) {
                            col.style.display = 'none'; // Masquer l'abonnement actuel
                        }
                    } else {
                        // Si l'utilisateur n'a pas le bon rôle, redirigez-le vers la page d'erreur
                        window.location.href = 'error.html';
                    }
                }
            }).catch((error) => {
                console.log("Erreur lors de la récupération du document :", error);
            });
        } else {
            button.textContent = 'S\'abonne';
        }
    });

    // Ajouter le bouton à la carte
    cardBody.appendChild(button);

    // Ajouter la carte à l'élément de la grille
    col.appendChild(card);

    // Ajouter l'élément de la grille à la rangée
    row.appendChild(col);
  });
});
// Écouter l'événement de clic sur le bouton "Valider"
document.getElementById('button-addon2').addEventListener('click', function() {
  var codePromo = document.querySelector('.form-control').value.trim().toLowerCase();

  var promoRef = firebase.firestore().collection('Promo').doc('code');
  promoRef.get().then(function(doc) {
    if (doc.exists) {
      let codeFound = false;
      Object.keys(doc.data()).forEach(key => {
        var value = doc.data()[key];
        if (typeof value === 'string' && value.toLowerCase() === codePromo) {
          codeFound = true;
        }
      });
      var promoMessage = document.getElementById('promo-message');
      if (codeFound) {
        promoMessage.textContent = 'Code promo valide';
        promoMessage.style.color = 'green';

        // Obtenir l'ID de l'utilisateur connecté
        var userId = firebase.auth().currentUser.uid;
        // Accéder au document de l'utilisateur dans la collection 'users'
        var userRef = firebase.firestore().collection('users').doc(userId);

        // Mettre à jour le document de l'utilisateur
        userRef.update({
          role: 'Partenaire',
          collectes: 45,
          reservations: 20
        }).then(() => {
          console.log("Mise à jour du profil utilisateur réussie");
        }).catch((error) => {
          console.error("Erreur lors de la mise à jour du profil utilisateur:", error);
        });

      } else {
        promoMessage.textContent = 'Code promo invalide';
        promoMessage.style.color = 'red';
      }
    } else {
      console.log("Le document n'existe pas");
    }
  }).catch(function(error) {
    console.log("Erreur lors de la vérification du code promo:", error);
  });
});
var produitsRef = firebase.firestore().collection('produits');

// Récupérer tous les documents de la collection 'produits'
produitsRef.get().then((querySnapshot) => {
  // Supprimer le contenu existant de la balise <main>
  var main = document.querySelector('main2');
  main.innerHTML = '';
  // Ajouter le texte "Bonjour, Comment allez-vous?" au début de main2
  

  // Créer une nouvelle rangée pour les produits
  var row = document.createElement('div');
  row.className = 'row row-cols-3 row-cols-md-5 mb-5 text-center';
  main.appendChild(row);

  var produits = [];

  querySnapshot.forEach((doc) => {
    var produit = doc.data();
    produit.id = doc.id; // Ajouter l'ID du document aux données du produit
    produits.push(produit);
  });

  // Trier les produits par prix
  produits.sort((a, b) => (a.prix || 0) - (b.prix || 0));

  produits.forEach((produit) => {
    var cardBlock = document.createElement('div'); // Créer un nouveau bloc de carte
    cardBlock.className = 'card-block';
    // Créer un nouvel élément de la grille pour le produit
    var col = document.createElement('div');
    col.className = 'col-12 col-sm-6 col-md-4 col-lg-3'; // Ajusté pour la réactivité
    // Récupérer le champ texte
    var texte = produit.texte; // Remplacez "texte" par le nom de votre champ texte

    // Créer une nouvelle carte pour le produit
    var card = document.createElement('div');
    card.className = 'card mb-4 rounded-3 shadow-sm';
    // Créer une nouvelle balise pour le texte
    var textElement = document.createElement('p'); // Remplacez 'p' par le type de balise que vous voulez utiliser
    textElement.textContent = texte;
    // Ajouter le titre du produit à la carte
    var cardHeader = document.createElement('div');
    cardHeader.className = 'card-header py-3';
    var title = document.createElement('h4');
    title.className = 'my-0 fw-normal custom-font'; // Ajouter la classe 'custom-font'
    title.textContent = produit.nom; // Utiliser le titre du produit
    cardHeader.appendChild(title);
    card.appendChild(cardHeader);
    // Ajouter la balise de texte à la carte
    card.appendChild(textElement);

    // Ajouter le prix du produit à la carte
    var cardBody = document.createElement('div');
    cardBody.className = 'card-body';
    var price = document.createElement('h1');
    price.className = 'card-title pricing-card-title';
    price.textContent = produit.prix ? produit.prix + '€' : 'Non défini';
    cardBody.appendChild(price);

    // Ajouter la description du produit à la carte
    var descriptionList = document.createElement('ul');
    descriptionList.className = 'list-unstyled mt-3 mb-4';
    descriptionList.style.display = 'none'; // Cacher initialement la liste

    var descriptionItem = document.createElement('li');
    descriptionItem.className = 'description';
    descriptionItem.textContent = produit.description; // Utiliser la description du produit
    descriptionList.appendChild(descriptionItem);

    // Ajouter les avantages du produit à la carte
    var avantageItem = document.createElement('li');
    avantageItem.className = 'avantage';
    avantageItem.textContent = produit.avantage; // Utiliser les avantages du produit
    descriptionList.appendChild(avantageItem);

    cardBody.appendChild(descriptionList);

    // Créer un nouveau bouton pour afficher les détails
    var detailButton = document.createElement('button');
    detailButton.type = 'button';
    detailButton.className = 'btn btn-info';
    detailButton.style.backgroundColor = '#10294B'; // Changer la couleur du bouton en rouge
    detailButton.style.color = 'white'; // Changer la couleur du texte en blanc

    // Créer l'icône de flèche vers le bas
    var downArrowIcon = document.createElement('i');
    downArrowIcon.className = 'fas fa-arrow-down';
    downArrowIcon.style.color = 'white'; // Définir la couleur de l'icône en blanc
    // Ajouter l'icône au bouton
    detailButton.appendChild(downArrowIcon);
    detailButton.appendChild(document.createTextNode(' Détail'));

    // Ajouter un écouteur d'événements pour afficher les détails lorsque le bouton est cliqué
    detailButton.addEventListener('click', function() {
        // Afficher ou cacher les détails du produit
        if (descriptionList.style.display === 'none') {
            descriptionList.style.display = 'block'; // Afficher la liste
            descriptionList.style.opacity = '1'; // Faire apparaître la liste
            downArrowIcon.style.transform = 'rotate(180deg)'; // Faire tourner l'icône
        } else {
            descriptionList.style.display = 'none'; // Cacher la liste
            descriptionList.style.opacity = '0'; // Faire disparaître la liste
            downArrowIcon.style.transform = 'rotate(0deg)'; // Remettre l'icône à sa position initiale
        }
    });
    descriptionList.className = 'list-unstyled mt-3 mb-4 details-list'; // Ajout de la classe 'details-list'
    downArrowIcon.className = 'fas fa-arrow-down arrow-icon'; // Ajout de la classe 'arrow-icon'
    // Ajouter le bouton à la carte
    cardBody.appendChild(detailButton);

    var image = document.createElement('img');
    image.src = produit.image; // Utiliser l'URL de l'image du produit
    image.className = 'card-img-top'; // Ajouter une classe pour le style
    card.appendChild(image);
    card.appendChild(cardBody);
    // Créer un nouveau bouton pour ouvrir la modal
    var button = document.createElement('button');
    button.type = 'button';
    button.className = 'btn btn-primary btn-block'; // Ajouter la classe 'btn-block' pour faire occuper le bouton toute la largeur
    button.textContent = 'Acheter';
    button.style.backgroundColor = '#CE2029'; // Changer la couleur du bouton en rouge
    button.style.color = 'white'; // Changer la couleur du texte en blanc

    button.addEventListener('click', function() {
        var id = produit.id;
        var description = produit.description ? encodeURIComponent(produit.description) : '';
        var avantage = produit.avantage ? encodeURIComponent(produit.avantage) : '';
        var prix = produit.prix ? encodeURIComponent(produit.prix) : '';

        window.location.href = '../recapProduits.html?id=' + id + '&description=' + description + '&avantage=' + avantage + '&prix=' + prix;
    });
    // Créer un élément 'card-footer' pour positionner le bouton en bas de la carte
    var cardFooter = document.createElement('div');
    cardFooter.className = 'card-footer'; // Ajouter la classe 'card-footer'
    cardFooter.appendChild(button); // Ajouter le bouton au 'card-footer'

    // Ajouter le 'card-footer' à la carte
    card.appendChild(cardFooter);
    // Ajouter la carte à l'élément de la grille
    col.appendChild(card);
    cardBlock.appendChild(col); // Ajouter la colonne au bloc de carte
    // Ajouter l'élément de la grille à la rangée
    row.appendChild(col);
  });
});


  firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            var userId = user.uid; // Récupérer l'ID de l'utilisateur
            var docRef = firebase.firestore().collection('users').doc(userId);
            docRef.get().then((doc) => {
                if (doc.exists) {
                    var role = doc.data().role;
                    if (role === 'Mino' || role === 'Duo' || role === 'Solo' || role === 'Super Héros' || role == 'Partenaire') {
                        button.textContent = 'Upgrade';
                    } else {
                        button.textContent = 'S\'abonne';
                    }
                    // Afficher l'ID de l'utilisateur dans l'élément HTML
                  document.getElementById('user-id').textContent = userId;
                }
            }).catch((error) => {
                console.log("Erreur lors de la récupération du document :", error);
            });
        } else {
            button.textContent = 'S\'abonne';
        }
    });
  firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
        // L'utilisateur est connecté, obtenir les informations de l'utilisateur de Firestore
        var docRef = firebase.firestore().collection('users').doc(user.uid);
        
        docRef.get().then((doc) => {
            if (doc.exists) {
                // Mettre à jour le nom de l'utilisateur dans le HTML
                document.getElementById('user-surname').textContent = doc.data().nom;
                document.getElementById('user-name').textContent = doc.data().prenom;
                // Mettre à jour le solde de tokens de l'utilisateur dans le HTML
                document.getElementById('token-balance').textContent = doc.data().tokens;
                // Mettre à jour le rôle de l'utilisateur dans le HTML
                document.getElementById('current-subscription').textContent = doc.data().role;
                // Mettre à jour l'ID de l'utilisateur dans le HTML
                document.getElementById('user-id').textContent = doc.data().id;
                // Mettre à jour le compteur de collectes de l'utilisateur dans le HTML
                document.getElementById('new-collect-count').textContent = doc.data().collectes;
                
            } else {
                // Le document n'existe pas
                console.log("Aucun document correspondant !");
            }
        }).catch((error) => {
            console.log("Erreur lors de la récupération du document :", error);
        });
    } else {
    

    // Rediriger vers la page d'accueil ou la page de connexion
    window.location.href = 'index.html';
}
});


  // Récupérer une référence à la base de données Firestore
var db = firebase.firestore();


  function logout() {
    firebase.auth().signOut().then(() => {
      // Déconnexion réussie
      console.log('Déconnexion réussie');
      window.location.href = '/sign-in/index.html'; // Redirige vers la page de connexion
    }).catch((error) => {
      // Une erreur s'est produite
      console.log('Erreur de déconnexion :', error);
    });
  }
  function updateUserDetails() {
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            // L'utilisateur est connecté, obtenir les informations de l'utilisateur de Firestore
            var docRef = firebase.firestore().collection('users').doc(user.uid);
            
            docRef.get().then((doc) => {
                if (doc.exists) {
                    // Mettre à jour les détails de l'utilisateur dans le HTML
                    document.getElementById('user-name').textContent = doc.data().prenom;
                    document.getElementById('user-surname').textContent = doc.data().nom;
                    document.getElementById('current-subscription').textContent = doc.data().role;
                    document.getElementById('user-id').textContent = doc.data().id;
                    document.getElementById('client-id').textContent = doc.data().numeroClient;
                    document.getElementById('new-collect-count').textContent = doc.data().collectes;
                    document.getElementById('repassage-count').textContent = doc.data().reservations;
                    
                } else {
                    // Le document n'existe pas
                    console.log("Aucun document correspondant !");
                }
            }).catch((error) => {
                console.log("Erreur lors de la récupération du document :", error);
            });
        } else {
            // Aucun utilisateur n'est connecté
            document.getElementById('user-name').textContent = 'Invité';
            document.getElementById('user-surname').textContent = '';
            document.getElementById('current-subscription').textContent = 'Invité';
            document.getElementById('user-id').textContent = 'Invité';
            document.getElementById('new-collect-count').textContent = '0';
            document.getElementById('repassage-count').textContent = '0';
        }
    });
}

// Appeler la fonction pour mettre à jour les détails de l'utilisateur
updateUserDetails();
</script>

    </body>
</html>
